<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>Doorman</h1><p><img src="https://img.shields.io/badge/status-experimental-rainbow.svg?style=flat-square" alt="Project Status">
<a href="https://travis-ci.org/fabriclabs/doorman"><img src="https://img.shields.io/travis/fabriclabs/doorman.svg?branch=master&amp;style=flat-square" alt="Build Status"></a>
<a href="https://coveralls.io/r/fabriclabs/doorman"><img src="https://img.shields.io/coveralls/fabriclabs/doorman.svg?style=flat-square" alt="Coverage Status"></a>
<a href="https://github.com/fabriclabs/doorman/contributors"><img src="https://img.shields.io/github/contributors/fabriclabs/doorman.svg?style=flat-square" alt="Total Contributors"></a></p>
<p>Doorman is a friendly, automated helper for managers of large online
communities.  Simple to install and easy to configure, Doorman can welcome new
users, guide them through onboarding flows, and help keep track of important
projects and events using <a href="#plugins">a robust-plugin API</a>.</p>
<h2>Quick Start</h2><ol>
<li>Fork (optional) and clone:
<code>git clone https://github.com/FabricLabs/doorman.git</code></li>
<li>Run <code>cp config/index.json.example config/index.json</code> &amp; add your <a href="#auth">auth tokens</a></li>
<li>Run <code>npm install</code></li>
<li>Run <code>npm start</code></li>
</ol>
<h2>Services</h2><p>Doorman comes pre-configured with support for multiple chat platforms, including
<a href="https://slack.com">Slack</a>, <a href="https://discordapp.com">Discord</a>, and <a href="https://matrix.org">Matrix</a>.  Adding support for
additional services is easy — inspect the <code>lib/service.js</code> prototype for a list
of required methods.  Feel free to submit a Pull Request to add support for your
favorite services!</p>
<h2>Plugins</h2><p>Doorman behaviors range from simple triggers (commands prefixed with <code>!</code> <em>located
anywhere within a message</em>) to complex applications which communicate
through <a href="#message-passing">a simple message-passing API</a>.  The trigger prefix
is configurable using the <code>trigger</code> keyword in the configuration file.</p>
<p>Plugins are <strong>automatically</strong> loaded when included in <code>config/index.json</code>, under
the <code>&quot;plugins&quot;</code> section, or <strong>manually</strong> by calling <code>doorman.use()</code>.  Doorman
will look first in the <code>./plugins</code> folder for the named plugin (most useful for
simple prototyping), then will attempt to load from NPM using the <code>doorman-*</code>
naming pattern.  Plugins may be published to the NPM registry and installed via
<code>npm install</code> as usual.</p>
<h3>Official Plugins</h3><p>List of external plugins for you to include with your installation (if you wish):</p>
<ul>
<li><a href="https://github.com/FabricLabs/doorman-xkcd">xkcd</a> =&gt; adds the !xkcd command</li>
<li><a href="https://github.com/FabricLabs/doorman-wikipedia">wikipedia</a> =&gt; adds the !wiki command</li>
<li><a href="https://github.com/FabricLabs/doorman-urbandictionary">urbandictionary</a> =&gt; adds the !urban command</li>
<li><a href="https://github.com/FabricLabs/doorman-dictionary">dictionary</a> =&gt; adds the !define command</li>
<li><a href="https://github.com/FabricLabs/doorman-dice">dice</a> =&gt; adds the !roll command</li>
<li><a href="https://github.com/FabricLabs/doorman-cocktail-lookup">cocktail-lookup</a> =&gt; adds the !cocktail command</li>
<li><a href="https://github.com/FabricLabs/doorman-beer-lookup">beer-lookup</a> =&gt; adds the !brew command</li>
<li><a href="https://github.com/FabricLabs/doorman-translator">translator</a> =&gt; adds translation commands</li>
<li><a href="https://github.com/FabricLabs/doorman-misc">misc</a> =&gt; adds misc commands that don't fall into other categories</li>
<li><a href="https://github.com/FabricLabs/doorman-admin">admin</a> =&gt; adds administrative commands</li>
<li><a href="https://github.com/FabricLabs/doorman-catfact">catfact</a> =&gt; spits out a random cat fact</li>
<li><a href="https://github.com/FabricLabs/doorman-insult">insult</a> =&gt; spits out a random PG insult</li>
<li><a href="https://github.com/FabricLabs/doorman-interstellafact">interstellafact</a> =&gt; spits out a random fact about Interstella 5555</li>
<li><a href="https://github.com/FabricLabs/doorman-topologyfact">topologyfact</a> =&gt; spits out a random topology fact</li>
<li><a href="https://github.com/FabricLabs/doorman-choicemaker">choicemaker</a> =&gt; makes a choice for you, based on given inputs</li>
<li><a href="https://github.com/FabricLabs/doorman-8ball">8ball</a> =&gt; ask the magic 8ball something!</li>
<li><a href="https://github.com/FabricLabs/doorman-smifffact">smifffact</a> =&gt; spits out a random fact about Will Smith</li>
<li><a href="https://github.com/FabricLabs/doorman-dogfact">dogfact</a> =&gt; spits out a random dog fact</li>
<li><a href="https://github.com/FabricLabs/doorman-chucknorrisfact">chucknorrisfact</a> =&gt; spits out a random fact about Chuck Norris</li>
<li><a href="https://github.com/FabricLabs/doorman-mathfact">mathfact</a> =&gt; spits out a random math fact</li>
<li><a href="https://github.com/FabricLabs/doorman-yearfact">yearfact</a> =&gt; spits out a random year fact</li>
<li><a href="https://github.com/FabricLabs/doorman-datefact">datefact</a> =&gt; spits out a random date fact</li>
<li><a href="https://github.com/FabricLabs/doorman-remaeusfact">remaeusfact</a> =&gt; spits out a random fact about <a href="https://www.roleplaygateway.com/member/Rem%C3%A6us/">Remaeus</a></li>
</ul>
<h3>Simple Plugins</h3><h4>Ping-Pong Example Plugin, <code>./plugins/ping.json</code></h4><pre class="prettyprint source lang-json"><code>{
  &quot;ping&quot;: &quot;Pong!&quot;
}</code></pre><p>To use this plugin, add <code>ping</code> to your configuration file and Doorman will
respond to any messages that include <code>!ping</code> with a simple <code>Pong!</code> response.</p>
<h3>Complex Plugins</h3><p>In addition to simple <code>!triggers</code>, Doorman can call functions to compute
responses, or even instantiate external applications for managing long-running
processes.</p>
<h4>Function Call Example Plugin, <code>./plugins/erm.js</code></h4><pre class="prettyprint source lang-js"><code>const erm = require('erm');
const plugin = {
  erm: function (msg) {
    return erm(msg);
  }
};

module.exports = plugin;</code></pre><h4>Instantiated Example Plugin</h4><pre class="prettyprint source lang-js"><code>function MyPlugin (config) {
  // config will be passed from `./config/index.json` based on the plugin name
  this.start();
}

MyPlugin.prototype.start = function () {
  console.log('Hello, world!');
};

module.exports = MyPlugin;</code></pre><h3>Manually Loading Plugins</h3><p>To load the plugin, simply call <code>doorman.use()</code> on the plugin you wish to add.
Multiple <code>!triggers</code> can be added, each as <code>key =&gt; value</code> mappings provided by
the plugin.</p>
<pre class="prettyprint source lang-js"><code>const config = require('./config');
const plugin = { fancy: 'Mmm, fancy!' };

const Doorman = require('doorman');
const doorman = new Doorman(config);

doorman.use(plugin);
doorman.start();</code></pre><h2>Message Passing API</h2><p>Doorman emits events like any other <code>EventEmitter</code>, using a simple router for
distinguishing between messages, users, and channels on various services.  This
allows Doorman to stay connected to multiple networks simultaneously — a feature
we rely on in <a href="https://fabric.pub">our flagship project, Fabric</a>!</p>
<h3>General Message Format</h3><h4>Identifiers</h4><p>Doorman uses <a href="https://docs.fabric.pub/messages">the Fabric Messaging Format</a> to
uniquely identify objects within the system.  Each object has an <code>id</code> field,
which usually takes the following format:</p>
<p><code>:service/:collection/:identifier</code></p>
<p>For example, a <code>user</code> event might emit the following object:</p>
<pre class="prettyprint source lang-json"><code>{
  &quot;id&quot;: &quot;slack/users/U09HF4JLV&quot;,
  &quot;@data&quot;: {
    &quot;id&quot;: &quot;U09HF4JLV&quot;
  }
}</code></pre><h3>Users (the <code>user</code> event)</h3><h3>Channels (the <code>channel</code> event)</h3><h3>Messages (the <code>message</code> event)</h3><h3>State Management (the <code>patch</code> event)</h3><h2>Configuration</h2><p>Configuring Doorman will typically require the creation of a &quot;bot&quot; user on the
platform of choice, and the use of a security token to authenticate requests.</p>
<h3>Slack</h3><p>In your team's workspace, browse to &quot;Apps&quot;, &quot;Custom Integrations&quot;, &quot;Bots&quot;, and
finally &quot;New configuration&quot;.  Place the &quot;API Token&quot; into <code>config/index.json</code>:</p>
<pre class="prettyprint source lang-json"><code>{
  &quot;slack&quot;: {
    &quot;token&quot;: &quot;xoxb-0000000000000-somelongstring...&quot;
  }
}</code></pre><h3>Discord</h3><p>@naterchrdsn will need to fill this out. :)</p>
<h2>Documentation</h2><p>Documentation can be generated by running <code>npm run make:docs</code> — this will output
an HTML-formatted copy of the API to <code>docs/</code>, which can be served with (if
installed!) <code>http-server docs</code> or simply opened in your browser.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Doorman.html">Doorman</a></li><li><a href="Plugin.html">Plugin</a></li><li><a href="Router.html">Router</a></li><li><a href="Service.html">Service</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Apr 27 2018 18:35:30 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>